{"version":3,"file":"index.es.js","sources":["../src/index.js"],"sourcesContent":["import { Platform } from 'react-native';\nimport { registerNativeHandlers } from 'stream-chat-react-native-core';\nimport NetInfo from '@react-native-community/netinfo';\nimport ImagePicker from 'react-native-image-picker';\nimport DocumentPicker from 'react-native-document-picker';\n\nregisterNativeHandlers({\n  NetInfo: {\n    addEventListener(listener) {\n      let unsubscribe;\n      // For NetInfo >= 3.x.x\n      if (NetInfo.fetch && typeof NetInfo.fetch === 'function') {\n        unsubscribe = NetInfo.addEventListener(({ isConnected }) => {\n          listener(isConnected);\n        });\n        return unsubscribe;\n      } else {\n        // For NetInfo < 3.x.x\n        unsubscribe = NetInfo.addEventListener('connectionChange', () => {\n          NetInfo.isConnected.fetch().then((isConnected) => {\n            listener(isConnected);\n          });\n        });\n\n        return unsubscribe.remove;\n      }\n    },\n\n    fetch() {\n      return new Promise((resolve, reject) => {\n        // For NetInfo >= 3.x.x\n        if (NetInfo.fetch && typeof NetInfo.fetch === 'function') {\n          NetInfo.fetch().then(({ isConnected }) => {\n            resolve(isConnected);\n          }, reject);\n        } else {\n          // For NetInfo < 3.x.x\n          NetInfo.isConnected.fetch().then((isConnected) => {\n            resolve(isConnected);\n          }, reject);\n        }\n      });\n    },\n  },\n  pickImage: () =>\n    new Promise((resolve, reject) => {\n      ImagePicker.showImagePicker({}, (response) => {\n        if (response.error) {\n          reject(Error(response.error));\n        }\n        let { uri } = response;\n        if (Platform.OS === 'android') {\n          uri = 'file://' + response.path;\n        }\n\n        resolve({\n          cancelled: response.didCancel,\n          uri,\n        });\n      });\n    }),\n  pickDocument: async () => {\n    try {\n      const res = await DocumentPicker.pick({\n        type: [DocumentPicker.types.allFiles],\n      });\n      let { uri } = res;\n      if (Platform.OS === 'android') {\n        uri = 'file://' + res.path;\n      }\n\n      return {\n        cancelled: false,\n        uri,\n        name: res.name,\n      };\n    } catch (err) {\n      return {\n        cancelled: true,\n      };\n    }\n  },\n});\n\nif (Platform.OS === 'android') {\n  if (typeof Symbol === 'undefined') {\n    require('es6-symbol/implement');\n    if (Array.prototype[Symbol.iterator] === undefined) {\n      Array.prototype[Symbol.iterator] = function() {\n        let i = 0;\n        return {\n          next: () => ({\n            done: i >= this.length,\n            value: this[i++],\n          }),\n        };\n      };\n    }\n  }\n}\n\nexport * from 'stream-chat-react-native-core';\n"],"names":["registerNativeHandlers","NetInfo","addEventListener","listener","unsubscribe","fetch","isConnected","then","remove","Promise","resolve","reject","pickImage","ImagePicker","showImagePicker","response","error","Error","uri","Platform","OS","path","cancelled","didCancel","pickDocument","res","DocumentPicker","pick","type","types","allFiles","name","err","Symbol","require","Array","prototype","iterator","undefined","i","next","done","length","value"],"mappings":"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"}